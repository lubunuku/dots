#!/usr/bin/env bash

# prompt="dmenu -l 2 -c -bw 2 -g 3"
# prompt="dmenu -l 5 -c -bw 2"
# prompt="dmenu -l 5"
# prompt="dmenu"
prompt="dmenu $@"

uptime=$(uptime -p)
# uptime=$(uptime -p | sed -e 's/up //g')
dwm_pid="$(pidof dwm)"

# hibernate=" Hibernate"
# shutdown=" Shutdown"
# reboot="ﰇ Reboot"
# suspend="鈴 Suspend"
# lock=" Lock"
# logout="﫼 Quit"
# cancel="窱 Cancel"
# hibernate=""
# shutdown=""
# reboot="ﰇ"
# suspend="鈴"
# lock=""
# logout="﫼"
# cancel="窱"
hibernate=" hibernate"
shutdown=" shutdown"
reboot="ﰇ reboot"
suspend="鈴 suspend"
lock=" lock"
logout="﫼 quit"
cancel="窱 cancel"
# hibernate="hibernate"
# shutdown="shutdown"
# reboot="reboot"
# suspend="suspend"
# lock="lock"
# logout="quit"
# cancel="cancel"

option="$suspend\n$shutdown\n$reboot\n$lock\n$logout"

select="$(echo -e "$option" | $prompt -p "$uptime")"
# select="$(echo -e "$option" | $prompt -p "Uptime - $uptime")"
# select="$(echo -e "$option" | $prompt)"

case $select in
	$hibernate)
		systemctl hibernate
		;;
	$shutdown)
		systemctl poweroff
		;;
	$reboot)
		systemctl reboot
		;;
	$suspend)
		systemctl suspend #; dm-tool lock
		;;
	# $lock)
	# 	dm-tool lock
	# 	;;
	$lock)
		physlock
		;;
	$logout)
		kill -TERM dwmpid $dwm_pid
esac
